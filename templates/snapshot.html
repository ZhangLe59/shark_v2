<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Result</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <style>
        .good {
            background-color: limegreen;
        }
        .watch {
            background-color: orange;
        }
        .bad {
            background-color: red;
        }
        table, td, th {
            border-collapse: collapse;
            border: 1px solid black;
        }
    </style>
</head>

<body>

<script>
    let json_string = '{{ content.data|tojson|safe}}';
    let json_obj = JSON.parse(json_string);

    let stocks = Object.keys(json_obj);

    let web_content = `<table><tr><th>Stock</th><th>Snapshot</th></tr>`;

    for (let i = 0; i < stocks.length; i++) {
        let stock_json = json_obj[stocks[i]];
        let shortName = stock_json['short_name'];
        let conclusion = stock_json['comment']['conclusion'];

        let status_code = conclusion.substring(0, 1);
        let the_css = '';
        let icon ='';
        switch (status_code) {
            case '1':
                the_css = 'good';
                icon = 'sentiment_very_satisfied';
                break;
            case '2':
                the_css = 'watch';
                icon = 'sentiment_satisfied';
                break;
            case '3':
                the_css = 'bad';
                icon = 'sentiment_very_dissatisfied';
                break;
            default:
                icon = 'sentiment_neutral';
                break;
        }
        web_content += `<tr><td class=${the_css}><i class="material-icons md-18" >${icon}</i>${shortName}</td><td>${conclusion.substring(4)}</td></tr>`;
    }
    web_content += `</table>`;

    document.body.innerHTML = web_content;
</script>

</body>

</html>

